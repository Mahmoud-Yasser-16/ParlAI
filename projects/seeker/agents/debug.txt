==========================================================================================
input to search decision:
observations:  [{'raw': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': ''}, 'knowledge_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__'}, 'search_query_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __generate-query__', 'skip_retrieval': True, 'full_text': 'I like messi __generate-query__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,  8616,   382,    16, 22770,
          838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 8616, 382, 16, 22770, 838, 2], 'context_original_length': 11, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 9699, 1011, 23032, 1035, 1035, 102]}, 'search_decision_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __is-search-required__', 'skip_retrieval': True, 'full_text': 'I like messi __is-search-required__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,   275,    16, 12951,    16,
        35831,   838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 275, 16, 12951, 16, 35831, 838, 2], 'context_original_length': 12, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 2003, 1011, 3945, 1011, 3223, 1035, 1035, 102]}}]
knowledge_agent_observations:  [{'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__'}]
========================================
output from search decision:
batch_reply_sdm:  [{'id': 'ComboFidSearchQuery', 'episode_done': False, 'text': '__do-search__', 'beam_texts': [('__do-search__', -0.1649167835712433)], 'metrics': {'clen': AverageMetric(12), 'ctrunc': AverageMetric(0), 'ctrunclen': AverageMetric(0), 'gen_n_toks': AverageMetric(7)}}]
search_indices:  [0]
knowledge_agent_observations:  [{'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__', 'skip_retrieval': False}]
==========================================================================================
input to query generator: 
observations:  [{'raw': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': ''}, 'knowledge_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__', 'skip_retrieval': False}, 'search_query_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __generate-query__', 'skip_retrieval': True, 'full_text': 'I like messi __generate-query__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,  8616,   382,    16, 22770,
          838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 8616, 382, 16, 22770, 838, 2], 'context_original_length': 11, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 9699, 1011, 23032, 1035, 1035, 102]}, 'search_decision_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __is-search-required__', 'skip_retrieval': True, 'full_text': 'I like messi __is-search-required__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,   275,    16, 12951,    16,
        35831,   838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 275, 16, 12951, 16, 35831, 838, 2], 'context_original_length': 12, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 2003, 1011, 3945, 1011, 3223, 1035, 1035, 102]}}]
search_indices:  [0]
/home/ubuntu/anaconda3/lib/python3.9/site-packages/parlai/core/torch_generator_agent.py:1728: UserWarning: __floordiv__ is deprecated, and its behavior will change in a future version of pytorch. It currently rounds toward 0 (like the 'trunc' function NOT 'floor'). This results in incorrect rounding for negative values. To keep the current behavior, use torch.div(a, b, rounding_mode='trunc'), or for actual floor division, use torch.div(a, b, rounding_mode='floor').
  hyp_ids = best_idxs // voc_size
========================================
output from query generator:
batch_reply_sqm:  [{'id': 'ComboFidSearchQuery', 'episode_done': False, 'text': 'Messi', 'beam_texts': [('Messi', -1.3588320016860962)], 'metrics': {'clen': AverageMetric(11), 'ctrunc': AverageMetric(0), 'ctrunclen': AverageMetric(0), 'gen_n_toks': AverageMetric(4)}}]
==========================================================================================
input to knowledge generator: 
observations:  [{'raw': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': ''}, 'knowledge_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__', 'skip_retrieval': False}, 'search_query_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __generate-query__', 'skip_retrieval': True, 'full_text': 'I like messi __generate-query__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,  8616,   382,    16, 22770,
          838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 8616, 382, 16, 22770, 838, 2], 'context_original_length': 11, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 9699, 1011, 23032, 1035, 1035, 102]}, 'search_decision_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __is-search-required__', 'skip_retrieval': True, 'full_text': 'I like messi __is-search-required__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,   275,    16, 12951,    16,
        35831,   838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 275, 16, 12951, 16, 35831, 838, 2], 'context_original_length': 12, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 2003, 1011, 3945, 1011, 3223, 1035, 1035, 102]}}]
search_indices:  [0]
knowledge_agent_observations:  [{'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__', 'skip_retrieval': False}]
========================================
output from search decision:
batch_reply_krm:  [{'id': 'ComboFidSearchQuery', 'episode_done': False, 'text': 'Neymar is better than both Lionel Messi and Cristiano Ronaldo', 'beam_texts': [('Neymar is better than both Lionel Messi and Cristiano Ronaldo', -4.645022392272949), ("11 Ballon d'Ors between them.", -6.080987453460693), ('11 Ballon d’Ors between them.', -9.008604049682617), ('Neymar is better than both Lionel Messi and Cristiano', -10.624716758728027)], 'top_docs': [ID: 
Title: _0
Text: Ronaldinho talks Dembele, Messi, Pedri, Barcelona’s future under Xavi, ID: 
Title: _0
Text: Ronaldinho talks Dembele, Messi, Pedri, Barcelona’s future under Xavi, ID: 
Title: _0
Text: Who is No 1 Messi or Ronaldo?Cristiano Ronaldo vs Lionel Messi: Individual awards, ID: 
Title: _0
Text: How many world cup Messi played?Most World Cups Appeared At, ID: 
Title: _0
Text: Is Messi or Neymar better?Neymar is better than both Lionel Messi and Cristiano Ronaldo according to former Brazil right-back Cafu. The general consensus is that while Neymar is one of the best in the world, he's not quite been able to get on the same level as Messi and Ronaldo, who have 11 Ballon d'Ors between them.], 'metrics': {'clen': AverageMetric(5), 'ctrunc': AverageMetric(0), 'ctrunclen': AverageMetric(0), 'gen_n_toks': AverageMetric(15)}}]
==========================================================================================
input to knowledge generator: 
observations:  [{'raw': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': ''}, 'knowledge_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'full_text': 'I like messi', 'text_vec': tensor([   1,   44,  592, 2089,   76,    2,    2]), 'full_text_vec': [44, 592, 2089, 76, 2], 'context_original_length': 5, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 102], 'prior_knowledge_responses': '__SILENCE__', 'skip_retrieval': False}, 'search_query_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __generate-query__', 'skip_retrieval': True, 'full_text': 'I like messi __generate-query__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,  8616,   382,    16, 22770,
          838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 8616, 382, 16, 22770, 838, 2], 'context_original_length': 11, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 9699, 1011, 23032, 1035, 1035, 102]}, 'search_decision_agent': {'id': 'context', 'text': 'I like messi', 'episode_done': False, 'knowledge_response': '', 'temp_history': ' __is-search-required__', 'skip_retrieval': True, 'full_text': 'I like messi __is-search-required__', 'text_vec': tensor([    1,    44,   592,  2089,    76, 11597,   275,    16, 12951,    16,
        35831,   838,     2,     2]), 'full_text_vec': [44, 592, 2089, 76, 11597, 275, 16, 12951, 16, 35831, 838, 2], 'context_original_length': 12, 'context_truncate_rate': False, 'context_truncated_length': 0, 'added_start_end_tokens': True, 'query_vec': [101, 1045, 2066, 6752, 2072, 1035, 1035, 2003, 1011, 3945, 1011, 3223, 1035, 1035, 102]}}]
batch_reply_krm:  [{'id': 'ComboFidSearchQuery', 'episode_done': False, 'text': 'Neymar is better than both Lionel Messi and Cristiano Ronaldo', 'beam_texts': [('Neymar is better than both Lionel Messi and Cristiano Ronaldo', -4.645022392272949), ("11 Ballon d'Ors between them.", -6.080987453460693), ('11 Ballon d’Ors between them.', -9.008604049682617), ('Neymar is better than both Lionel Messi and Cristiano', -10.624716758728027)], 'top_docs': [ID: 
Title: _0
Text: Ronaldinho talks Dembele, Messi, Pedri, Barcelona’s future under Xavi, ID: 
Title: _0
Text: Ronaldinho talks Dembele, Messi, Pedri, Barcelona’s future under Xavi, ID: 
Title: _0
Text: Who is No 1 Messi or Ronaldo?Cristiano Ronaldo vs Lionel Messi: Individual awards, ID: 
Title: _0
Text: How many world cup Messi played?Most World Cups Appeared At, ID: 
Title: _0
Text: Is Messi or Neymar better?Neymar is better than both Lionel Messi and Cristiano Ronaldo according to former Brazil right-back Cafu. The general consensus is that while Neymar is one of the best in the world, he's not quite been able to get on the same level as Messi and Ronaldo, who have 11 Ballon d'Ors between them.], 'metrics': {'clen': AverageMetric(5), 'ctrunc': AverageMetric(0), 'ctrunclen': AverageMetric(0), 'gen_n_toks': AverageMetric(15)}}]
========================================
output from search decision:
batch_reply_drm:  [{'id': 'ComboFidSearchQuery', 'episode_done': False, 'text': "Lionel Messi is the best player in the world. He's better than Ronaldo and Neymar.", 'beam_texts': [("Lionel Messi is the best player in the world. He's better than Ronaldo and Neymar.", -6.684991836547852), ("Lionel Messi is the best player in the world. He's better than Ronaldo and Neymar", -7.385661602020264), ("Lionel Messi is the best player in the world. He's better than Ronaldo and Neymar combined.", -7.459880352020264), ('Lionel Messi is the best player in the world, but I like Neymar more than him.', -7.682882308959961), ('Lionel Messi is the best player in the world. Do you like Neymar better than Messi?', -7.748028755187988), ("Lionel Messi is the best player in the world. He's better than Ronaldo and Neymar!", -7.777645587921143), ('Lionel Messi is the best player in the world, but I like Neymar better than him.', -7.851345062255859), ('Lionel Messi is the best player in the world. Do you like Neymar better than him?', -7.857072830200195), ("Lionel Messi is the best player in the world. He's better than Ronaldo and Neymar. ", -7.940037727355957), ('Lionel Messi is the best player in the world, but I like Neymar more than Messi.', -8.118438720703125)], 'top_docs': [ID: 
Title: _0
Text: Ronaldinho talks Dembele, Messi, Pedri, Barcelona’s future under Xavi, ID: 
Title: _0
Text: Ronaldinho talks Dembele, Messi, Pedri, Barcelona’s future under Xavi, ID: 
Title: _0
Text: Who is No 1 Messi or Ronaldo?Cristiano Ronaldo vs Lionel Messi: Individual awards, ID: 
Title: _0
Text: How many world cup Messi played?Most World Cups Appeared At, ID: 
Title: _0
Text: Is Messi or Neymar better?Neymar is better than both Lionel Messi and Cristiano Ronaldo according to former Brazil right-back Cafu. The general consensus is that while Neymar is one of the best in the world, he's not quite been able to get on the same level as Messi and Ronaldo, who have 11 Ballon d'Ors between them.], 'metrics': {'clen': AverageMetric(25), 'ctrunc': AverageMetric(0), 'ctrunclen': AverageMetric(0), 'gen_n_toks': AverageMetric(23)}}]
